#apiVersion: v1
#kind: Pod
#metadata:
#  name: mypod
#  labels:
#    app: product
#spec:
#  initContainers:
#    - name: wait-for-postgres
#      image: postgres:17-alpine
#      command:
#        - sh
#        - -c
#        - |
#          until pg_isready -h postgres -p 5432 -U product_user; do
#            echo "Waiting for postgres..."
#            sleep 2
#          done
#      env:
#        - name: PGPASSWORD
#          value: "product_password"
#  containers:
#    - name: product
#      image: product:latest
#      imagePullPolicy: Never # recommended for local development
#      ports:
#        - containerPort: 8080
#      env:
#        - name: DB_HOST
#          value: "postgres"
#        - name: SPRING_PROFILES_ACTIVE
#          value: "docker"
#        - name: DB_PORT
#          value: "5432"
#---
#
#apiVersion: v1
#kind: Service
#metadata:
#  name: product-service
#spec:
#  selector:
#    app: product
#  ports:
#    - port: 8080
#      targetPort: 8080
#  type: NodePort